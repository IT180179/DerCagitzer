  <div id="nav" style="padding-top: 2%">
  <!-- <p><a><mat-icon></mat-icon></a></p>
   <p class="long-box arrow" (click)="back()"><a><mat-icon>arrow_back</mat-icon></a></p>
   <p class="long-box today"><a>{{today}}</a></p>
   <p class="long-box arrow" (click)="forward()"><a><mat-icon>arrow_forward</mat-icon></a></p>
   <p><a (click)="openReservation()"><mat-icon>add</mat-icon></a></p>-->
</div>
<app-calendar (dateSelected)="dateSelected($event)"></app-calendar>

<div class="timetable">

  <div id="timesReservation">
    <h3 style="color: green">11:00</h3>
    <h3>12:00</h3>
    <h3 style="color: green">13:00</h3>
    <h3>14:00</h3>
    <h3>15:00</h3>
    <h3>16:00</h3>
    <h3 style="color: green">17:00</h3>
    <h3>18:00</h3>
    <h3 style="color: green">19:00</h3>
    <h3>20:00</h3>
    <h3>21:00</h3>
  </div>
  <div class="grid-container" #myBounds>

    <ng-container *ngIf="reservations.length > 0;">
      <ng-container *ngFor="let res of reservations; index as i">
        <ng-container *ngFor="let time of data">
          <ng-container *ngIf="time.fulltime == res.start_time">
            <div style="position: absolute" [ngStyle]= "{'transform': 'translate(' + (time.time * 50) + 'px, '+ ((res.tableEntity.tableno - 1) * 50) + 'px)'}">
            <div
              #resize ngDraggable
              [bounds]="myBounds"
              [inBounds]=true
              [gridSize]=50
              [preventDefaultEvent]=true
              [handle]="myHandle"
              (endOffset)="updateReservation($event, res)"

                 class="drag-grid"
              [ngStyle] ="{'width.px': (convertToNumber((res.end_time).toString(), (res.start_time).toString()) * 50)}"
                >

              <!--
              [ngStyle]="{'transform': 'translateY(' + (res.tableEntity.tableno * 50) + 'px)'}"-->

              <div (mouseover)="getInformation(res)" #myHandle class="drag-block-handle" >
                <p class="reservationNachname">&nbsp;&nbsp;{{res.customer_name}},&nbsp;&nbsp;&nbsp;{{res.person_amount}}&nbsp;Personen</p>
              </div>
            </div>
            </div>
          </ng-container>
        </ng-container>
      </ng-container>
    </ng-container>

    <div>
      <div *ngFor="let i of tablenr; index as j">
        <div class="tableNrBox">
          <p style="color: black; text-align: center; font-size: 1vw; font-weight: bold; padding: 0; margin: 0;">{{j + 1}}</p>
        </div>
      </div>
    </div>


    <!-- Draw grids -->
    <div *ngFor="let elements of data; index as i">
      <div *ngFor="let table of tablenr; index as j">
        <div [ngStyle]="{'border-bottom-left-radius': (elements.time == 1)? '10px' : '0px', 'border-top-left-radius': (elements.time == 1)? '10px' : '0px', 'border-bottom-right-radius': (elements.time == 22)? '10px' : '0px', 'border-top-right-radius': (elements.time == 22)? '10px' : '0px', 'display': (elements.time == 23)? 'none' : 'block'}"
             [ngDraggable]="false" [position]="{x: elements, y: tablenr }" [preventDefaultEvent]="true" class="box" (click)="openReservation(elements.time, table.nr, date)">
          <small style="visibility: hidden">grid</small>
        </div>
      </div>
    </div>
  </div>
  <!--
  <div class="tisch1" style="margin-right: 1.75%">
    <mat-icon>schedule</mat-icon>
  </div>
  <ng-container *ngFor="let element of data; index as i">
    <div class="time" *ngIf="i == 0 || i == 1 || i == 2 || i == 3 || i == 6 || i == 7 || i == 8 || i == 9; else noSlot"
         style="background-color: green; -webkit-box-shadow: 0px 0px 2.5px 0px green; box-shadow: 0px 0px 2.5px 0px green;">{{element.time}}</div>
    <ng-template #noSlot>
      <div class="time">{{element.time}}</div>
    </ng-template>
  </ng-container>
  <br>
  <br>
  <br>
  <div class="wrapper">
    <div style="display: grid; grid-template-columns: repeat(1, 1fr); width: 7%; margin: 0">
      <div style="margin-bottom: 70%;" *ngFor="let element of tablenr">
        <div style="width: 80%; height: 200%;" class="tisch">{{element.nr}}</div>
      </div>
    </div>
    <div style="display: grid; grid-template-columns: repeat(12, 1fr); width: 83%;">



        <ng-container *ngFor="let data of data">
        <ng-container *ngFor="let tablenr of tablenr">
          <ng-container *ngIf="reservations.length > 0; else noRes">
              <div class="box" (click)="openReservation(tablenr, data, date)"><a></a></div>
            <ng-container *ngFor="let res of reservations; index as i">
              <div class="box" style="background-color: green;"
                   *ngIf="res.start_time == data.fulltime && res.tableEntity.tableno == tablenr.nr"
                   (click)="resInfo(res)"><a></a></div>
            </ng-container>
          </ng-container>
        </ng-container>
      </ng-container>



      <ng-template #noRes>
        <div class="box" (click)="openReservation(tablenr, data, date)"><a></a></div>
      </ng-template>
    </div>
  </div>-->
</div>

<app-side-overview [infoReservation] = "infoReservation"></app-side-overview>
