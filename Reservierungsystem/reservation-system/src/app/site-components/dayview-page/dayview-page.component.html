  <div id="nav" style="padding-top: 2%">
  <!-- <p><a><mat-icon></mat-icon></a></p>
   <p class="long-box arrow" (click)="back()"><a><mat-icon>arrow_back</mat-icon></a></p>

   <p class="long-box arrow" (click)="forward()"><a><mat-icon>arrow_forward</mat-icon></a></p>
   <p><a (click)="openReservation()"><mat-icon>add</mat-icon></a></p>-->
    <img src="assets/images/Logo_Cagitz.png">
    <p  style="margin-top: -1.9%; margin-bottom: 2%" class="long-box today"><a>{{date | date: 'EEEE, d. MMMM y'}}</a></p>
</div>
  <br>
<app-calendar (dateSelected)="dateSelected($event)"></app-calendar>

<div class="timetable">

  <div id="timesReservation">
    <h3 style="color: green">11:00</h3>
    <h3>12:00</h3>
    <h3 style="color: green">13:00</h3>
    <h3>14:00</h3>
    <h3>15:00</h3>
    <h3>16:00</h3>
    <h3 style="color: green">17:00</h3>
    <h3>18:00</h3>
    <h3 style="color: green">19:00</h3>
    <h3>20:00</h3>
    <h3>21:00</h3>
  </div>
  <div style="margin-top: 2.5%" class="grid-container" #myBounds>

    <ng-container *ngIf="reservations.length > 0;">
      <ng-container *ngFor="let res of reservations; index as i">
        <ng-container *ngFor="let time of data">

          <ng-container *ngIf="time.fulltime == res.start_time && (res.tableEntity.room.room_id == Room || Room == 0)">
            <div style="position: absolute" [ngStyle]= "{'transform': 'translate(' + (time.time * 50) + 'px, '+ (((res.tableEntity.tableno - 1)- (Room == 0 ? Room : Room-1)*10) * 50) + 'px)'}">
            <div
              #resize ngDraggable
              [bounds]="myBounds"
              [inBounds]=true
              [gridSize]=50
              [preventDefaultEvent]=true
              [handle]="myHandle"
              (endOffset)="updateReservation($event, res)"

                 class="drag-grid"
              [ngStyle] ="{'width.px': (convertToNumber((res.end_time).toString(), (res.start_time).toString()) * 50)}"
                >

              <!--
              [ngStyle]="{'transform': 'translateY(' + (res.tableEntity.tableno * 50) + 'px)'}"-->

              <div (click)="getInformation(res)" #myHandle class="drag-block-handle" >
                <p class="reservationNachname">&nbsp;&nbsp;{{res.customer_name}},&nbsp;&nbsp;&nbsp;{{res.person_amount}}&nbsp;Personen</p>
              </div>
            </div>
            </div>
          </ng-container>
          </ng-container>
        </ng-container>
      </ng-container>

    <div *ngIf="Room!=0">
      <div class="tableNr" *ngFor="let i of tabels;">
        <div class="tableNrBox">
          <p style="color: black; text-align: center; font-size: 1vw; font-weight: bold; padding: 0; margin: 0;">{{i.number}}</p>
        </div>
        <span class="tooltiptext">Plätze: {{i.seats}}</span>
      </div>
    </div>
    <div  *ngIf="Room==0">
      <div  class="tableNr"  *ngFor="let i of alltabels;">
        <div class="tableNrBox">
          <p style="color: black; text-align: center; font-size: 1vw; font-weight: bold; padding: 0; margin: 0;" [routerLink]="['/tableplan', i.number]">{{i.number}}</p>
        </div>
        <span class="tooltiptext">Plätze: {{i.seats}}</span>
      </div>
    </div>


    <!-- Draw grids -->
    <div *ngFor="let elements of data; index as i">
      <div *ngIf="Room!=0">
      <div *ngFor="let table of tabels; index as j">
        <div  [ngStyle]="{'border-bottom-left-radius': (elements.time == 1)?
        '10px' : '0px', 'border-top-left-radius': (elements.time == 1)? '10px' :
        '0px', 'border-bottom-right-radius': (elements.time == 22)? '10px' :
        '0px', 'border-top-right-radius': (elements.time == 22)? '10px' :
        '0px', 'display': (elements.time == 23)? 'none' : 'block'}"
             [ngDraggable]="false" [position]="{x: elements, y: tablenr }" [preventDefaultEvent]="true" class="box" (click)=" openReservation(elements.time, table, date)">
          <small style="visibility: hidden">grid</small>
        </div>
      </div>
      </div>
        <div *ngIf="Room==0">
          <div *ngFor="let i of alltabels; index as j">
            <div  [ngStyle]="{'border-bottom-left-radius': (elements.time == 1)?
        '10px' : '0px', 'border-top-left-radius': (elements.time == 1)? '10px' :
        '0px', 'border-bottom-right-radius': (elements.time == 22)? '10px' :
        '0px', 'border-top-right-radius': (elements.time == 22)? '10px' :
        '0px', 'display': (elements.time == 23)? 'none' : 'block'}"
                 [ngDraggable]="false" [position]="{x: elements, y: tablenr }" [preventDefaultEvent]="true" class="box" (click)="openReservation(elements.time, i, date)">
              <small style="visibility: hidden">grid</small>
            </div>

          </div>
      </div>
    </div>
  </div>

</div>

<app-side-overview [infoReservation] = "infoReservation" [date] = "date"></app-side-overview>
